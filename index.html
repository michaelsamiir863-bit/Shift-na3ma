<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ø±Ø¯ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</title>
<style>
body{
  font-family:Tahoma;
  background:#eee;
  padding:20px;
}
.sheet{
  background:#fff;
  max-width:380px;
  margin:auto;
  padding:10px;
  border:1px solid #000;
  font-weight:bold; /* ÙƒÙ„ Ø§Ù„Ù†ØµÙˆØµ Ø¨ÙˆÙ„Ø¯ */
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  text-align:center;
  font-weight:bold;
}
td{
  border:1px solid #000;
  padding:6px;
  font-weight:bold;
}
input,select{
  width:100%;
  border:none;
  outline:none;
  font-family:Tahoma;
  font-size:14px;
  text-align:center;
  background:transparent;
  font-weight:bold;
}
.total{font-weight:bold;}

.actions{
  text-align:center;
  margin-top:15px;
}
button{
  padding:8px 20px;
  margin:5px;
  font-size:14px;
  cursor:pointer;
  font-weight:bold;
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
.preview-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:flex-start;
  padding-top:30px;
  z-index:1000;
}
.preview-box{
  background:#fff;
  width:380px;
  max-height:90vh;
  overflow:auto;
  padding:10px;
  border:1px solid #000;
  position:relative;
}
.preview-box button{
  margin:5px;
  font-weight:bold;
}

/* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
@media print{
  body{background:#fff;padding:0;}
  .actions,.preview-overlay button{display:none;} /* Ø¹Ø¯Ù… Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
  .sheet{
    border:none;
    max-width:80mm; /* Ø­Ø¬Ù… Ø¥ÙŠØµØ§Ù„ Ø­Ø±Ø§Ø±ÙŠ ØµØºÙŠØ± */
  }
  table,td,span{
    font-weight:bold; /* ÙƒÙ„ Ø§Ù„Ù†ØµÙˆØµ Ø¨ÙˆÙ„Ø¯ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
  }
}
</style>
</head>

<body>

<div class="sheet" id="receipt">
<table>
<tr><td>Ø§Ø³Ù… Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</td><td><input value="Ù†Ø¹Ù…Ø© Ø§Ù„Ù„Ù‡"></td></tr>
<tr><td>Ø§Ù„ÙŠÙˆÙ…</td><td><input id="day" readonly></td></tr>
<tr><td>Ø´ÙŠÙØª</td><td>Ù…Ù† <select id="fromShift"></select>Ø¥Ù„Ù‰ <select id="toShift"></select></td></tr>
<tr><td>Ø§Ù„ØªØ§Ø±ÙŠØ®</td><td><input type="date" id="date" onchange="setDay()"></td></tr>
<tr><td>Ù†Ù‚Ø¯ÙŠ ÙØ¹Ù„ÙŠ</td><td><input type="number" id="cash" oninput="calc()"></td></tr>
<tr><td>Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</td><td><input type="number" id="insta" oninput="calc()"></td></tr>
<tr><td>Ù…Ø­ÙØ¸Ø©</td><td><input type="number" id="wallet" oninput="calc()"></td></tr>
<tr><td>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ Ø³Ø¨Ù‚</td><td><input id="total" class="total" readonly></td></tr>
<tr><td>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙŠØ²Ø§</td><td><input type="number" id="visa"></td></tr>
<tr><td>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</td><td><input type="number"></td></tr>
<tr><td>Ù…Ø´ØªØ±ÙŠØ§Øª Ø£ÙØ±Ø§Ø¯</td><td><input type="number"></td></tr>
<tr><td>Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø¬</td><td><select><option></option><option>Ø¯ Ù…Ø§ÙŠÙƒÙ„ Ø³Ù…ÙŠØ±</option><option>Ø¯ Ù‡Ø§Ù†ÙŠ Ø±Ø¶Ø§</option><option>Ø¯ Ù‡Ø¨Ø©</option><option>Ø¯ Ø±Ø§Ø¹ÙˆØ«</option><option>Ø¯ ÙƒÙˆØ«Ø±</option><option>Ø¯ Ø§Ø³Ù„Ø§Ù…</option><option>Ø¯ Ø¨Ø³Ù†Øª</option></select></td></tr>
<tr><td>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</td><td><select><option></option><option>Ø¯ Ù…Ø§ÙŠÙƒÙ„ Ø³Ù…ÙŠØ±</option><option>Ø¯ Ù‡Ø§Ù†ÙŠ Ø±Ø¶Ø§</option><option>Ø¯ Ù‡Ø¨Ø©</option><option>Ø¯ Ø±Ø§Ø¹ÙˆØ«</option><option>Ø¯ ÙƒÙˆØ«Ø±</option><option>Ø¯ Ø§Ø³Ù„Ø§Ù…</option><option>Ø¯ Ø¨Ø³Ù†Øª</option></select></td></tr>
</table>
</div>

<div class="actions">
<button onclick="openPreview()">ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„</button>
</div>

<div class="preview-overlay" id="preview">
  <div class="preview-box" id="previewContent">
    <div style="text-align:center;margin-bottom:10px;">
      <button onclick="printPreview()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„</button>
      <button onclick="closePreview()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<script>
// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´ÙŠÙØª 1 â†’ 12
for(let i=1;i<=12;i++){
  fromShift.innerHTML += `<option>${i}</option>`;
  toShift.innerHTML += `<option>${i}</option>`;
}

// Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ Ø³Ø¨Ù‚
function calc(){
  let c = Number(cash.value)||0;
  let i = Number(insta.value)||0;
  let w = Number(wallet.value)||0;
  total.value = c+i+w;
}

// Ø§Ù„ÙŠÙˆÙ… Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
function setDay(){
  let d = new Date(date.value);
  if(!isNaN(d)){
    day.value = d.toLocaleDateString('ar-EG',{weekday:'long'});
  }
}

// ÙØªØ­ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
function openPreview(){
  previewContent.innerHTML = `<div style="text-align:center;margin-bottom:10px;">
      <button onclick="printPreview()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„</button>
      <button onclick="closePreview()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    </div>` + receipt.outerHTML;
  document.getElementById("preview").style.display="flex";
}

// ØºÙ„Ù‚ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
function closePreview(){
  previewContent.innerHTML = `<div style="text-align:center;margin-bottom:10px;">
      <button onclick="printPreview()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„</button>
      <button onclick="closePreview()">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    </div>`;
  document.getElementById("preview").style.display="none";
}

// Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¹ Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©
function printPreview(){
  let clone = receipt.cloneNode(true);

  // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø¯Ø®Ù„Ø© ÙƒÙ†Øµ
  clone.querySelectorAll('input').forEach(input=>{
    let span = document.createElement('span');
    span.textContent = input.value;
    span.style.fontWeight='bold';
    input.parentNode.replaceChild(span,input);
  });
  clone.querySelectorAll('select').forEach(select=>{
    let span = document.createElement('span');
    span.textContent = select.value;
    span.style.fontWeight='bold';
    select.parentNode.replaceChild(span,select);
  });

  // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
  let printWindow = window.open('','PRINT','width=300,height=600');
  printWindow.document.write('<html><head><title>Ø§Ù„Ø¥ÙŠØµØ§Ù„</title>');
  printWindow.document.write('<style>body{font-family:Tahoma;text-align:center;} table{width:100%;border-collapse:collapse;} td{border:1px solid #000;padding:6px;} span{font-weight:bold;}</style>');
  printWindow.document.write('</head><body>');
  printWindow.document.write(clone.outerHTML);
  printWindow.document.write('</body></html>');
  printWindow.document.close();
  printWindow.focus();
  printWindow.print();
  printWindow.close();
}
</script>

</body>
</html>

