<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ø±Ø¯ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</title>

<style>
body{
  font-family:Tahoma;
  background:#f0f0f0;
  padding:10px;
}
.sheet{
  background:#fff;
  max-width:380px;
  margin:auto;
  padding:10px;
  border:1px solid #000;
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  text-align:center;
}
td{
  border:1px solid #000;
  padding:6px;
}
input,select{
  width:100%;
  border:none;
  outline:none;
  font-family:Tahoma;
  font-size:14px;
  text-align:center;
  background:transparent;
}
.total{
  font-weight:bold;
}
.actions{
  text-align:center;
  margin-top:15px;
}
button{
  padding:8px 18px;
  margin:5px;
  font-size:14px;
  cursor:pointer;
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
.preview-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:9999;
}
.preview-box{
  background:#fff;
  width:80mm;
  padding:8px;
  border:1px solid #000;
}

/* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
@media print{
  body{background:#fff;padding:0}
  .actions,.preview-overlay{display:none !important}
  .sheet{
    border:none;
    max-width:80mm;
  }
}
</style>
</head>

<body>

<div class="sheet" id="receipt">
<table>
<tr><td>Ø§Ø³Ù… Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</td><td><input id="pharmacy" value="Ù†Ø¹Ù…Ø© Ø§Ù„Ù„Ù‡"></td></tr>
<tr><td>Ø§Ù„ÙŠÙˆÙ…</td><td><input id="day" readonly></td></tr>

<tr>
<td>Ø§Ù„Ø´ÙŠÙØª</td>
<td>
Ù…Ù† <select id="fromShift"></select>
Ø¥Ù„Ù‰ <select id="toShift"></select>
</td>
</tr>

<tr>
<td>Ø§Ù„ØªØ§Ø±ÙŠØ®</td>
<td><input type="date" id="date"></td>
</tr>

<tr><td>Ù†Ù‚Ø¯ÙŠ ÙØ¹Ù„ÙŠ</td><td><input type="number" id="cash"></td></tr>
<tr><td>Ø§Ù†Ø³ØªØ§Ø¨Ø§ÙŠ</td><td><input type="number" id="insta"></td></tr>
<tr><td>Ù…Ø­ÙØ¸Ø©</td><td><input type="number" id="wallet"></td></tr>

<tr>
<td>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø§ Ø³Ø¨Ù‚</td>
<td><input id="total" class="total" readonly></td>
</tr>

<tr><td>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙŠØ²Ø§</td><td><input type="number" id="visa"></td></tr>
<tr><td>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</td><td><input type="number" id="ops"></td></tr>
<tr><td>Ù…Ø´ØªØ±ÙŠØ§Øª Ø£ÙØ±Ø§Ø¯</td><td><input type="number" id="personal"></td></tr>

<tr>
<td>Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø¬</td>
<td>
<select id="drawer">
<option></option>
<option>Ø¯ Ù…Ø§ÙŠÙƒÙ„ Ø³Ù…ÙŠØ±</option>
<option>Ø¯ Ù‡Ø§Ù†ÙŠ Ø±Ø¶Ø§</option>
<option>Ø¯ Ù‡Ø¨Ø©</option>
<option>Ø¯ Ø±Ø§Ø¹ÙˆØ«</option>
<option>Ø¯ ÙƒÙˆØ«Ø±</option>
<option>Ø¯ Ø§Ø³Ù„Ø§Ù…</option>
<option>Ø¯ Ø¨Ø³Ù†Øª</option>
</select>
</td>
</tr>

<tr>
<td>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</td>
<td>
<select id="reviewer">
<option></option>
<option>Ø¯ Ù…Ø§ÙŠÙƒÙ„ Ø³Ù…ÙŠØ±</option>
<option>Ø¯ Ù‡Ø§Ù†ÙŠ Ø±Ø¶Ø§</option>
<option>Ø¯ Ù‡Ø¨Ø©</option>
<option>Ø¯ Ø±Ø§Ø¹ÙˆØ«</option>
<option>Ø¯ ÙƒÙˆØ«Ø±</option>
<option>Ø¯ Ø§Ø³Ù„Ø§Ù…</option>
<option>Ø¯ Ø¨Ø³Ù†Øª</option>
</select>
</td>
</tr>
</table>
</div>

<div class="actions">
<button onclick="openPreview()">ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
<button onclick="printReceipt()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
<div class="preview-overlay" id="preview" onclick="closePreview()">
  <div class="preview-box" id="previewContent"></div>
</div>

<script>
const inputs = document.querySelectorAll("input,select");

/* ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø´ÙŠÙØª */
for(let i=1;i<=12;i++){
  fromShift.innerHTML += `<option>${i}</option>`;
  toShift.innerHTML += `<option>${i}</option>`;
}

/* Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */
function calc(){
  total.value =
    (+cash.value||0) + (+insta.value||0) + (+wallet.value||0);
}
cash.oninput = insta.oninput = wallet.oninput = calc;

/* Ø§Ù„ÙŠÙˆÙ… */
date.onchange = ()=>{
  let d = new Date(date.value);
  if(!isNaN(d))
    day.value = d.toLocaleDateString('ar-EG',{weekday:'long'});
};

/* LocalStorage */
inputs.forEach(el=>{
  if(el.id && localStorage.getItem(el.id))
    el.value = localStorage.getItem(el.id);

  el.oninput = ()=>{
    if(el.id)
      localStorage.setItem(el.id,el.value);
    calc();
  };
});
calc();

/* Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
function openPreview(){
  let clone = receipt.cloneNode(true);

  clone.querySelectorAll("input,select").forEach(el=>{
    let span = document.createElement("span");
    span.textContent = el.value || "â€”";
    el.replaceWith(span);
  });

  previewContent.innerHTML = "";
  previewContent.appendChild(clone);
  preview.style.display="flex";
}

function closePreview(){
  preview.style.display="none";
}

/* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
function printReceipt(){
  closePreview();
  window.print();
}

/* ØªÙØ±ÙŠØº Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
window.onafterprint = ()=>{
  inputs.forEach(el=>{
    el.value="";
    if(el.id) localStorage.removeItem(el.id);
  });
  calc();
};
</script>

</body>
</html>

